"use strict";(self.webpackChunkdocs_riscv_org=self.webpackChunkdocs_riscv_org||[]).push([[2138],{5296:(e,s,a)=>{a.r(s),a.d(s,{default:()=>I});var r=a(6540),t=a(4164),n=a(4103),l=a.n(n),c=a(5637),o=a(1934),u=a(7143),i=a(6289),h=a(6942),d=a(1430),m=a(3592),g=a(6849),p=a(1082),f=a(539),y=a(797),v=a(1835),j=a(8455),b=a(4620),x=a(9303);const _={searchQueryInput:"searchQueryInput_cpyO",searchVersionInput:"searchVersionInput_wf2r",searchResultsColumn:"searchResultsColumn_PLpb",algoliaLogo:"algoliaLogo_YElR",algoliaLogoPathFill:"algoliaLogoPathFill_grp5",searchResultItem:"searchResultItem_AlWU",searchResultItemHeading:"searchResultItemHeading_HJFH",searchResultItemPath:"searchResultItemPath_x9Ef",searchResultItemSummary:"searchResultItemSummary_jej3",searchQueryColumn:"searchQueryColumn_hQFc",searchVersionColumn:"searchVersionColumn_GkmC",searchLogoColumn:"searchLogoColumn_Mj_0",loadingSpinner:"loadingSpinner_E_zt","loading-spin":"loading-spin_hlTL",loader:"loader_ujSQ"};var P=a(4848);function R({docsSearchVersionsHelpers:e}){const s=Object.entries(e.allDocsData).filter(([,e])=>e.versions.length>1);return(0,P.jsx)("div",{className:(0,t.A)("col","col--3","padding-left--none",_.searchVersionColumn),children:s.map(([a,r])=>{const t=s.length>1?`${a}: `:"";return(0,P.jsx)("select",{onChange:s=>e.setSearchVersion(a,s.target.value),defaultValue:e.searchVersions[a],className:_.searchVersionInput,children:r.versions.map((e,s)=>(0,P.jsx)("option",{label:`${t}${e.label}`,value:e.name},s))},a)})})}function S(){const{i18n:{currentLocale:e}}=(0,y.A)(),{algolia:{appId:s,apiKey:a,indexName:n,contextualSearch:S}}=(0,v.c)(),I=(0,j.C)(),C=function(){const{selectMessage:e}=(0,d.W)();return s=>e(s,(0,f.T)({id:"theme.SearchPage.documentsFound.plurals",description:'Pluralized label for "{count} documents found". Use as much plural forms (separated by "|") as your language support (see https://www.unicode.org/cldr/cldr-aux/charts/34/supplemental/language_plural_rules.html)',message:"One document found|{count} documents found"},{count:s}))}(),N=function(){const e=(0,h.Gy)(),[s,a]=(0,r.useState)(()=>Object.entries(e).reduce((e,[s,a])=>({...e,[s]:a.versions[0].name}),{})),t=Object.values(e).some(e=>e.versions.length>1);return{allDocsData:e,versioningEnabled:t,searchVersions:s,setSearchVersion:(e,s)=>a(a=>({...a,[e]:s}))}}(),[T,A]=(0,m.b)(),w=function(e){return e?(0,f.T)({id:"theme.SearchPage.existingResultsTitle",message:'Search results for "{query}"',description:"The search page title for non-empty query"},{query:e}):(0,f.T)({id:"theme.SearchPage.emptyResultsTitle",message:"Search the documentation",description:"The search page title for empty query"})}(T),V={items:[],query:null,totalResults:null,totalPages:null,lastPage:null,hasMore:null,loading:null},[L,E]=(0,r.useReducer)((e,s)=>{switch(s.type){case"reset":return V;case"loading":return{...e,loading:!0};case"update":return T!==s.value.query?e:{...s.value,items:0===s.value.lastPage?s.value.items:e.items.concat(s.value.items)};case"advance":{const s=e.totalPages>e.lastPage+1;return{...e,lastPage:s?e.lastPage+1:e.lastPage,hasMore:s}}default:return e}},V),H=S?["language","docusaurus_tag"]:[],q=(0,c.p)(s,a),F=l()(q,n,{hitsPerPage:15,advancedSyntax:!0,disjunctiveFacets:H});F.on("result",({results:{query:e,hits:s,page:a,nbHits:r,nbPages:t}})=>{if(""===e||!Array.isArray(s))return void E({type:"reset"});const n=e=>e.replace(/algolia-docsearch-suggestion--highlight/g,"search-result-match"),l=s.map(({url:e,_highlightResult:{hierarchy:s},_snippetResult:a={}})=>{const r=Object.keys(s).map(e=>n(s[e].value));return{title:r.pop(),url:I(e),summary:a.content?`${n(a.content.value)}...`:"",breadcrumbs:r}});E({type:"update",value:{items:l,query:e,totalResults:r,totalPages:t,lastPage:a,hasMore:t>a+1,loading:!1}})});const[M,O]=(0,r.useState)(null),Q=(0,r.useRef)(0),D=(0,r.useRef)(o.A.canUseIntersectionObserver&&new IntersectionObserver(e=>{const{isIntersecting:s,boundingClientRect:{y:a}}=e[0];s&&Q.current>a&&E({type:"advance"}),Q.current=a},{threshold:1})),k=(0,g._q)((s=0)=>{S&&(F.addDisjunctiveFacetRefinement("language",e),Object.entries(N.searchVersions).forEach(([e,s])=>{F.addDisjunctiveFacetRefinement("docusaurus_tag",`docs-${e}-${s}`)})),F.setQuery(T).setPage(s).search()});return(0,r.useEffect)(()=>{if(!M)return;const e=D.current;return e?(e.observe(M),()=>e.unobserve(M)):()=>!0},[M]),(0,r.useEffect)(()=>{E({type:"reset"}),T&&(E({type:"loading"}),setTimeout(()=>{k()},300))},[T,N.searchVersions,k]),(0,r.useEffect)(()=>{L.lastPage&&0!==L.lastPage&&k(L.lastPage)},[k,L.lastPage]),(0,P.jsxs)(b.A,{children:[(0,P.jsx)(p.be,{title:w}),(0,P.jsx)(u.A,{children:(0,P.jsx)("meta",{property:"robots",content:"noindex, follow"})}),(0,P.jsxs)("div",{className:"container margin-vert--lg",children:[(0,P.jsx)(x.A,{as:"h1",children:w}),(0,P.jsxs)("form",{className:"row",onSubmit:e=>e.preventDefault(),children:[(0,P.jsx)("div",{className:(0,t.A)("col",_.searchQueryColumn,{"col--9":N.versioningEnabled,"col--12":!N.versioningEnabled}),children:(0,P.jsx)("input",{type:"search",name:"q",className:_.searchQueryInput,placeholder:(0,f.T)({id:"theme.SearchPage.inputPlaceholder",message:"Type your search here",description:"The placeholder for search page input"}),"aria-label":(0,f.T)({id:"theme.SearchPage.inputLabel",message:"Search",description:"The ARIA label for search page input"}),onChange:e=>A(e.target.value),value:T,autoComplete:"off",autoFocus:!0})}),S&&N.versioningEnabled&&(0,P.jsx)(R,{docsSearchVersionsHelpers:N})]}),(0,P.jsxs)("div",{className:"row",children:[(0,P.jsx)("div",{className:(0,t.A)("col","col--8",_.searchResultsColumn),children:!!L.totalResults&&C(L.totalResults)}),(0,P.jsx)("div",{className:(0,t.A)("col","col--4","text--right",_.searchLogoColumn)})]}),L.items.length>0?(0,P.jsx)("main",{children:L.items.map(({title:e,url:s,summary:a,breadcrumbs:r},n)=>(0,P.jsxs)("article",{className:_.searchResultItem,children:[(0,P.jsx)(x.A,{as:"h2",className:_.searchResultItemHeading,children:(0,P.jsx)(i.A,{to:s,dangerouslySetInnerHTML:{__html:e}})}),r.length>0&&(0,P.jsx)("nav",{"aria-label":"breadcrumbs",children:(0,P.jsx)("ul",{className:(0,t.A)("breadcrumbs",_.searchResultItemPath),children:r.map((e,s)=>(0,P.jsx)("li",{className:"breadcrumbs__item",dangerouslySetInnerHTML:{__html:e}},s))})}),a&&(0,P.jsx)("p",{className:_.searchResultItemSummary,dangerouslySetInnerHTML:{__html:a}})]},n))}):[T&&!L.loading&&(0,P.jsx)("p",{children:(0,P.jsx)(f.A,{id:"theme.SearchPage.noResultsText",description:"The paragraph for empty search result",children:"No results were found"})},"no-results"),!!L.loading&&(0,P.jsx)("div",{className:_.loadingSpinner},"spinner")],L.hasMore&&(0,P.jsx)("div",{className:_.loader,ref:O,children:(0,P.jsx)(f.A,{id:"theme.SearchPage.fetchingNewResults",description:"The paragraph for fetching new search results",children:"Fetching new results..."})})]})]})}function I(){return(0,P.jsx)(p.e3,{className:"search-page-wrapper",children:(0,P.jsx)(S,{})})}}}]);